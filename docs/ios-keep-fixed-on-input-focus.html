<!DOCTYPE html>
<html style="height: 100%">
<head>
  <meta name="viewport" content="initial-scale=1, minimum-scale=1, maximum-scale=1" />
  <style>
    #window {
      position: relative;
      box-sizing: border-box;
      border: 2px solid red;
      border-bottom: 1px solid red;
      overflow: hidden;
      height: 100%;
    }

    #input {
      /* Safari zooms page in if font size is less than 16px */
      font-size: 16px;
      margin: 20px 0px;
      height: 20px;
    }
  </style>

  <script>
    // Move input box to the bottom of page to force Safari
    // scroll window to obtain exact height of the visible area
    function onInputClick (event) {
      event.preventDefault();
      event.stopPropagation();
      var input = document.getElementById('input');
      input.style.height = '1px';
      input.style.bottom = '0px';
      input.style.position = 'absolute';
      input.focus();
    }
    
    // Restore input box position and height after focus (and scroll on iOS!) happens
    function onInputFocus (event) {
      var input = document.getElementById('input');
      input.style.height = '20px';
      input.style.position = null;
      input.style.bottom = null;
    }
    
    // Restore container's height after unfocusing
    function onInputBlur (event) {
      if (window.focusPatchApplied) {
        window.focusPatchApplied = false;
        var style = document.getElementById('window').style;
        style.height = '100%';
        style.top = '0px';
        window.scrollTo(0, 0);
      }
    }
    
    window.addEventListener('resize', function (event) {
    });

    // Change container's height and vertical offset after iOS scrolls it on input box focus
    window.addEventListener('scroll', function (event) {
      if (document.body.scrollTop !== 0) {
        // Safari only in portrait mode reports smaller size.
        var newWindowHeight = window.innerHeight;
        // If iOS in portrait mode, real height when focused is little bit bigger:
        newWindowHeight += 10.5;

        var offsetTop = document.body.scrollTop;
        var style = document.getElementById('window').style;
        style.height = newWindowHeight + 'px';
        style.top = offsetTop + 'px';
        window.focusPatchApplied = true;
      }
    });
    
    document.addEventListener('DOMContentLoaded', function () {
      
      var input = document.getElementById('input');
      input.addEventListener('touchend', onInputClick);
      input.addEventListener('mousedown', onInputClick);
      input.addEventListener('focus', onInputFocus);
      input.addEventListener('blur', onInputBlur);
    });
  </script>
</head>
<body style="margin: 0; padding: 0; height: 100%">
  <div id="window">
    <div style="position: absolute; top: 0px">Top</div>
    <div style="position: absolute; bottom: 0px">Bottom</div>
    <input id="input" type="text" value="Tap me">
  </div>
</body>
